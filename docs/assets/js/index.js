(()=>{var h=class{constructor(e){this.observers=[],this.searchForm=e,this.searchError=document.querySelector(".js-search-form__error"),this.searchInput=document.querySelector(".js-search-form__input"),this.searchForm.addEventListener("submit",this.handleSumbit.bind(this)),this.searchInput.addEventListener("input",this.handleInput.bind(this))}handleSumbit(e){e.preventDefault();let t=!1,n=new FormData(this.searchForm);n.get("search").length===0&&(this.searchError.textContent="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043E\u043A\u0443 \u043F\u043E\u0438\u0441\u043A\u0430",t=!0),!t&&this.observers.forEach(i=>i.handleEvent("search",n.get("search")))}handleInput(e){e.target.classList.contains("js-search-form__input")&&(this.searchError.textContent="")}addObserver(e){this.observers.push(e)}removeObserver(e){this.observers=this.observers.filter(t=>t!==e)}};var d=class{constructor(e){this.searchResultRoot=e;let t=document.querySelector(".js-search-form");this.searchForm=new h(t),this.searchForm.addObserver(this)}async handleEvent(e,t){if(e==="search"){let n=`q=${encodeURIComponent(`${t} in:name`)}`,r=await(await fetch(`https://api.github.com/search/repositories?${n}`)).json(),l=document.createDocumentFragment(),a=document.createElement("ul");if(a.classList.add("search-result__list"),r.total_count===0)a.textContent="\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E";else{this.searchResultRoot.textContent="";let m=10,f=r.total_count>=m?m:r.total_count;for(let s=0;s<f;s+=1){let c=document.createElement("li");c.classList.add("search-result__list-item");let o=document.createElement("a");o.title="\u0421\u0441\u044B\u043B\u043A\u0430",o.href=r.items[s].url,o.textContent=`\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435: ${r.items[s].name}`,o.target="_blank",o.rel="noopener noreferrer";let u=document.createElement("span");u.textContent=`\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435: ${r.items[s].description}`,c.appendChild(o),c.appendChild(u),a.appendChild(c),console.log(r.items[s])}}l.appendChild(a),this.searchResultRoot.appendChild(l)}}},E=new d(document.querySelector(".js-search-result"));})();
