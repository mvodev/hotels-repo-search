(()=>{var i=class{constructor(e){this.observers=[],this.searchForm=e,this.searchError=document.querySelector(".js-search-form__error"),this.searchInput=document.querySelector(".js-search-form__input"),this.searchForm.addEventListener("submit",this.handleSumbit.bind(this)),this.searchInput.addEventListener("input",this.handleInput.bind(this))}handleSumbit(e){e.preventDefault();let t=!1,n=new FormData(this.searchForm);n.get("search").length===0&&(this.searchError.textContent="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u043E\u043A\u0443 \u043F\u043E\u0438\u0441\u043A\u0430",t=!0),!t&&this.observers.forEach(c=>c.handleEvent("search",n.get("search")))}handleInput(e){e.target.classList.contains("js-search-form__input")&&(this.searchError.textContent="")}addObserver(e){this.observers.push(e)}removeObserver(e){this.observers=this.observers.filter(t=>t!==e)}};var u=class{constructor(e){this.searchResultRoot=e;let t=document.querySelector(".js-search-form");this.searchForm=new i(t),this.searchForm.addObserver(this),this.spinner=document.querySelector(".js-search-result__loader"),this.searchWrapper=document.querySelector(".js-search-result"),this.searchList=document.querySelector(".js-search-result__list"),this.curtain=document.querySelector(".js-search-result__curtain")}async handleEvent(e,t){if(e==="search"){this.curtain.classList.remove("search-result__curtain_disabled"),this.spinner.classList.remove("search-result__loader_disabled");let n=`q=${encodeURIComponent(`${t} in:name`)}`,s=await(await fetch(`https://api.github.com/search/repositories?${n}`)).json();if(s.total_count===0)this.searchList.innerHTML="<li><span>\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E</span></li>";else{this.searchList.innerHTML="";let h=10,d=s.total_count>=h?h:s.total_count;for(let a=0;a<d;a+=1){let o=document.createElement("li");o.classList.add("search-result__list-item");let r=document.createElement("a");r.title="\u0421\u0441\u044B\u043B\u043A\u0430",r.href=s.items[a].url,r.textContent=`\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435: ${s.items[a].name}`,r.target="_blank",r.rel="noopener noreferrer";let l=document.createElement("span");l.textContent=`\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435: ${s.items[a].description}`,o.appendChild(r),o.appendChild(l),this.searchList.appendChild(o)}}this.curtain.classList.add("search-result__curtain_disabled"),this.spinner.classList.add("search-result__loader_disabled")}}},f=new u(document.querySelector(".js-search-result"));})();
